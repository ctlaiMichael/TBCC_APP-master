<section>
	<ng-container [ngSwitch]="nowPage">
		<!-- 1 -->
		<ng-container *ngSwitchCase="'familyPage'">
			<!-- stepbar Start-->
			<div class="sub_info_frame">
				<ul class="step_bar_frame">
					<li class="step_bar step_active"><span>1.填寫配偶、血親資料</span></li>
					<li class="step_bar"></li>
					<li class="step_bar"></li>
					<li class="step_bar"></li>
				</ul>
			</div>
			<!-- stepbar End-->
			<div class="row_single">
				<h4 class='simple_title'>{{'PG_ONLINE.TITLE.REALTIONFORM' | translate}}</h4>
			</div>
			<div class="sub_info_subtitle">
				申請書填寫已婚或有受扶養未成年子女時為必填
			</div>
			<div class="row_single"></div>
			<!-- *狀況已婚，或有填寫未成年撫養子女數時，此欄位必填 -->
			<div class="row_single">
				<h4 class="simple_title">授信申請人配偶、二親等以內之血親</h4>
			</div>
			<ng-container *ngFor="let reItem of relativeData;let tk = index;">
				<div class="row_single">
					<ul class="inner_table_frame" [ngClass]="{'active_warnning':(reItem['error']['name'] && reItem['error']['name']!= '')}">
						<li class="inner_table_cell">姓名{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="50" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['name']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['name'] | translate }}</i>
				</div>
				<div class="row_single">
					<ul class="inner_table_frame"[ngClass]="{'active_warnning':(reItem['error']['idNo'] && reItem['error']['idNo']!= '')}" >
						<li class="inner_table_cell">身分證字號{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="10" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['idNo']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['idNo'] | translate }}</i>
				</div>
				<div class="row_single">
					<ul class="inner_table_frame " [ngClass]="{'active_warnning':(reItem['error']['title'] && reItem['error']['title']!= '')}">
						<li class="inner_table_cell">稱謂{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="7" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['title']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['title'] | translate }}</i>
					<!-- Del -->
					<div class="inner_button float_right_bt" *ngIf="tk >= Required; else needInfoBox;"
						 (click)="onDelete('family', tk)">
						<span>{{'PG_ONLINE.BTN.DELETE' | translate}}</span>
					</div>
					<ng-template #needInfoBox>
						<i class="select_info">此項目為必填，無法刪除</i>
					</ng-template>
				</div>	
				<hr class="divider">
			</ng-container>
			<!-- End Button -->
			<div class="row_single" *ngIf="maxAllowCount['relative'] > relativeData.length ">
				<div class="button_confirm">
					<div (click)="onInsert('family')">{{'PG_ONLINE.BTN.NEW_ADDED' | translate}}</div>
				</div>
			</div>
			<div class="row_single">
				<div class="double_button">
					<a href="javascript:void(0)" (click)="onCancel()">{{'BTN.PREVIOUS' | translate}}</a>
					<a href="javascript:void(0)" (click)="onConfirm()">{{'BTN.NEXT' | translate}}</a>
				</div>
			</div>
		</ng-container>

		<!-- 2 -->
		<ng-container *ngSwitchCase="'compPage'">
			<!-- stepbar Start-->
			<div class="sub_info_frame">
				<ul class="step_bar_frame">
					<li class="step_bar"></li>
					<li class="step_bar step_active"><span>2.填寫負責人企業資料</span></li>
					<li class="step_bar"></li>
					<li class="step_bar"></li>
				</ul>
			</div>
			<!-- stepbar End-->
			<div class="row_single">
				<h4 class='simple_title'>{{'PG_ONLINE.TITLE.REALTIONFORM' | translate}}</h4>
			</div>
			<!-- <div class="sub_info_subtitle">
				您的申請資料 *表示必填
			</div>
			<div class="row_single"></div> -->
			<!-- *此欄位為非必填欄位 -->
			<div class="row_single">
				<h4 class='simple_title'>授信申請人擔任負責人之企業</h4>
			</div>
			<ng-container *ngFor="let reItem of companyData;let tk = index;">
				<div class="row_single">
					<ul class="inner_table_frame" [ngClass]="{'active_warnning':(reItem['error']['name'] && reItem['error']['name']!= '')}">
						<li class="inner_table_cell">企業名稱{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="50" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['name']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['name'] | translate }}</i>
				</div>
				<div class="row_single">
					<ul class="inner_table_frame"[ngClass]="{'active_warnning':(reItem['error']['idNo'] && reItem['error']['idNo']!= '')}" >
						<li class="inner_table_cell">統編{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="10" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['idNo']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['idNo'] | translate }}</i>
				</div>
				<div class="row_single">
					<ul class="inner_table_frame " [ngClass]="{'active_warnning':(reItem['error']['title'] && reItem['error']['title']!= '')}">
						<li class="inner_table_cell">擔任職務{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="7" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['title']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['title'] | translate }}</i>
					<!-- Del -->
					<div class="inner_button float_right_bt" (click)="onDelete('company', tk)">
						<span>{{'PG_ONLINE.BTN.DELETE' | translate}}</span>
					</div>
				</div>	
				<hr class="divider">
			</ng-container>
			<!-- End Button -->
			<div class="row_single" *ngIf="maxAllowCount['company'] > companyData.length">
				<div class="button_confirm">
					<div (click)="onInsert('company')">{{'PG_ONLINE.BTN.NEW_ADDED' | translate}}</div>
				</div>
			</div>
			<div class="row_single">
				<div class="double_button">
					<a href="javascript:void(0)" (click)="onCancel_2()">{{'BTN.PREVIOUS' | translate}}</a>
					<a href="javascript:void(0)" (click)="onConfirm_2()">{{'BTN.NEXT' | translate}}</a>
				</div>
			</div>
		</ng-container>

		<!-- 3 -->
		<ng-container *ngSwitchCase="'spousePage'">
			<!-- stepbar Start-->
			<div class="sub_info_frame">
				<ul class="step_bar_frame">
					<li class="step_bar"></li>
					<li class="step_bar"></li>
					<li class="step_bar step_active"><span>3.填寫配偶負責人企業資料</span></li>
					<li class="step_bar"></li>
				</ul>
			</div>
			<!-- stepbar End-->
			<div class="row_single">
				<h4 class='simple_title'>{{'PG_ONLINE.TITLE.REALTIONFORM' | translate}}</h4>
			</div>
			<!-- <div class="sub_info_subtitle">
				您的申請資料 *表示必填
			</div>
			<div class="row_single"></div> -->
			<!-- *此欄位為非必填欄位 -->
			<div class="row_single">
				<h4 class='simple_title'>配偶擔任負責人之企業</h4>
			</div>
			
			<ng-container *ngFor="let reItem of coupleData;let tk = index;">
				<div class="row_single">
					<ul class="inner_table_frame" [ngClass]="{'active_warnning':(reItem['error']['name'] && reItem['error']['name']!= '')}">
						<li class="inner_table_cell">企業名稱{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="50" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['name']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['name'] | translate }}</i>
				</div>
				<div class="row_single">
					<ul class="inner_table_frame"[ngClass]="{'active_warnning':(reItem['error']['idNo'] && reItem['error']['idNo']!= '')}" >
						<li class="inner_table_cell">統編{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="10" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['idNo']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['idNo'] | translate }}</i>
				</div>
				<div class="row_single">
					<ul class="inner_table_frame " [ngClass]="{'active_warnning':(reItem['error']['title'] && reItem['error']['title']!= '')}">
						<li class="inner_table_cell">擔任職務{{(tk+1)}}</li>
						<li class="inner_table_cell">
							<input type="text" maxlength="7" class="inner_input" placeholder="請輸入" [(ngModel)]="reItem['title']">
						</li>
					</ul>
					<i class="input_info_warnning">{{reItem['error']['title'] | translate }}</i>
					<!-- Del -->
					<div class="inner_button float_right_bt" (click)="onDelete('couple', tk)">
						<span>{{'PG_ONLINE.BTN.DELETE' | translate}}</span>
					</div>
				</div>	
				<hr class="divider">
			</ng-container>
			<!-- End Button -->
			<div class="row_single" *ngIf="maxAllowCount['couple'] > coupleData.length">
				<div class="button_confirm">
					<div (click)="onInsert('couple')">{{'PG_ONLINE.BTN.NEW_ADDED' | translate}}</div>
				</div>
			</div>
			<div class="row_single">
				<div class="double_button">
					<a href="javascript:void(0)" (click)="onCancel_3()">{{'BTN.PREVIOUS' | translate}}</a>
					<a href="javascript:void(0)" (click)="onConfirm_3()">{{'BTN.NEXT' | translate}}</a>
				</div>
			</div>
		</ng-container>

		<!-- 確認頁 -->
		<!-- 4 -->
		<ng-container *ngSwitchCase="'confirmPage'">
			<!-- stepbar Start-->
			<div class="sub_info_frame">
				<ul class="step_bar_frame">
					<li class="step_bar"></li>
					<li class="step_bar"></li>
					<li class="step_bar"></li>
					<li class="step_bar step_active"><span>4.資料確認</span></li>
				</ul>
			</div>
			<!-- stepbar End-->

			<div class="row_single">
				<h4 class='simple_title'>授信申請人配偶、二親等以內之血親</h4>
			</div>
			<ng-container *ngFor="let reItem of relativeData;let tk = index;">
				<ul class="table_info loan_1 loan_2">
					<li class="table_row">
						<span>姓名{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['name',{empty_str:'--'}] }}</i>
					</li>
					<li class="table_row">
						<span>身分證字號{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['idNo',{empty_str:'--'}] }}</i>
					</li>
					<li class="table_row">
						<span>稱謂{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['title',{empty_str:'--'}] }}</i>
					</li>
				</ul>
				<div class="row_single"></div>
			</ng-container>

			<div class="row_single"></div>
			<div class="row_single">
				<h4 class='simple_title'>授信申請人擔任負責人之企業</h4>
			</div>
			<ng-container *ngFor="let reItem of companyData;let tk = index;">
				<ul class="table_info loan_1 loan_2">
					<li class="table_row">
						<span>企業名稱{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['name',{empty_str:'--'}] }}</i>
					</li>
					<li class="table_row">
						<span>統編{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['idNo',{empty_str:'--'}] }}</i>
					</li>
					<li class="table_row">
						<span>擔任職務{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['title',{empty_str:'--'}] }}</i>
					</li>
				</ul>
				<div class="row_single"></div>
			</ng-container>

			<div class="row_single"></div>
			<div class="row_single">
				<h4 class='simple_title'>配偶擔任負責人之企業</h4>
			</div>
			<ng-container *ngFor="let reItem of coupleData;let tk = index;">
				<ul class="table_info loan_1 loan_2">
					<li class="table_row">
						<span>企業名稱{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['name',{empty_str:'--'}] }}</i>
					</li>
					<li class="table_row">
						<span>統編{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['idNo',{empty_str:'--'}] }}</i>
					</li>
					<li class="table_row">
						<span>擔任職務{{(tk+1)}}</span>
						<i>{{ reItem | fieldCheck: ['title',{empty_str:'--'}] }}</i>
					</li>
				</ul>
				<div class="row_single"></div>
			</ng-container>
			<div class="row_single"></div>
			<div class="row_single">
				<div class="double_button">
					<a href="javascript:void(0)" (click)="onCancel_4()">上一步</a>
					<a href="javascript:void(0)" (click)="onConfirm_4()">確定</a>
				</div>
			</div>
		</ng-container>
	</ng-container>
</section>