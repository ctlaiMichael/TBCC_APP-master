<ng-container>
  <section>
    <div class="sub_info_frame">
        <ul class="step_bar_frame">
            <li class="step_bar"></li>
            <li class="step_bar"></li>
            <li class="step_bar step_active"><span>3.填寫資料</span></li>
            <li class="step_bar"></li>
            <li class="step_bar"></li>
        </ul>
    </div>
    <!-- 首次購買 -->
    <div *ngIf="tmpGoldtermsInfo.firstGoldBuyFlag==='Y'">
        <ul class="table_info">
            <li class="table_row">
                <span>黃金存摺帳號</span>
                <i>{{ goldtermsInfo.goldAccount | accountFormate }}</i>
            </li>
            <li class="table_row">
                <span>每筆扣款成功手續費</span>
                <i>TWD 50</i>
            </li>
        </ul>
        <div class="row_single"></div>
        <div class="row_single">
            <ul class="inner_table_frame">
                <li class="inner_table_cell">
                    新台幣約定扣款帳號
                </li>
                <li class="inner_table_cell">
                    <select class="inner_select" (change)="onChangeTwAcct(tmpGoldtermsInfo.trnsfrOutAccount)"
                      [(ngModel)]="tmpGoldtermsInfo.trnsfrOutAccount">
                        <option *ngFor="let twMenu of trnsfrAcctsList" value="{{twMenu.acctNo}}">{{ twMenu.acctNo | accountFormate }}</option>
                    </select>
                </li>
            </ul>
            <i class="select_info">(可用餘額 {{balance | currencyMoney:'TWD'}} )</i>
        </div>
        <div class="row_single">
            <h4 class="simple_title">約定扣款日期及金額</h4>
        </div>
        <div class="row_single">
            <p class="inner_content">
                約定扣款金額須至少為新台幣3,000元以上，並應為新台幣1,000元之倍數。
            </p>
        </div>
        <div class="row_single">
            <ul class="normal_table" >
                <li class="normal_td w80">
                    <div class="inner_checkbox checkbox_inline">
                        <input type="checkbox" id="inner_checkbox001" name="inner_checkbox" [checked]="tmpGoldtermsInfo.fixAmount6Checked" (click)="dateClick('day6')">
                        <label for="inner_checkbox001">
                            <span><i></i></span>
                            <b>6日</b>
                        </label>
                    </div>
                </li>
                <li class="normal_td">
                    <ul class="inner_table_frame" [ngClass]="errorMsg['day6']?'active_warnning':''">
                        <li class="inner_table_cell">
                            扣款
                        </li>
                        <li class="inner_table_cell">
                            <input type="tel" name="" id="sixth" class="inner_input" 
                            [(ngModel)]="tmpGoldtermsInfo.fixAmount6" 
                            (click)="msgClear('day6')" 
                            (blur)="amtClick('day6',tmpGoldtermsInfo.fixAmount6)" 
                            (keyup)="amtClick('day6',tmpGoldtermsInfo.fixAmount6,'noShow')" 
                            placeholder="請輸入整數" >
                        </li>
                        <li class="inner_table_cell third_td">元</li>
                    </ul>
                    <i class="input_info_warnning" *ngIf="errorMsg['day6']!==''">{{ errorMsg['day6'] | translate}}</i>
                </li>
            </ul>
            <ul class="normal_table">
                <li class="normal_td w80">
                    <div class="inner_checkbox checkbox_inline">
                        <input type="checkbox" id="inner_checkbox002" name="inner_checkbox" [checked]="tmpGoldtermsInfo.fixAmount16Checked" (click)="dateClick('day16')">
                        <label for="inner_checkbox002">
                            <span><i></i></span>
                            <b>16日</b>
                        </label>
                    </div>
                </li>
                <li class="normal_td">
                    <ul class="inner_table_frame" [ngClass]="errorMsg['day16']?'active_warnning':''">
                        <li class="inner_table_cell ">
                            扣款
                        </li>
                        <li class="inner_table_cell">
                            <input type="tel" name="" id="sixteenth" class="inner_input" 
                            [(ngModel)]="tmpGoldtermsInfo.fixAmount16" 
                            (click)="msgClear('day16')" 
                            (blur)="amtClick('day16',tmpGoldtermsInfo.fixAmount16)" 
                            (keyup)="amtClick('day16',tmpGoldtermsInfo.fixAmount16,'noShow')" 
                            placeholder="請輸入整數">
                        </li>
                        <li class="inner_table_cell third_td">元</li>
                    </ul>
                    <i class="input_info_warnning" *ngIf="errorMsg['day16']!==''">{{ errorMsg['day16'] | translate}}</i>
                </li>
            </ul>
            <ul class="normal_table">
                <li class="normal_td w80">
                    <div class="inner_checkbox checkbox_inline">
                        <input type="checkbox" id="inner_checkbox003" name="inner_checkbox" [checked]="tmpGoldtermsInfo.fixAmount26Checked" (click)="dateClick('day26')">
                        <label for="inner_checkbox003">
                            <span><i></i></span>
                            <b>26日</b>
                        </label>
                    </div>
                </li>
                <li class="normal_td">
                    <ul class="inner_table_frame" [ngClass]="errorMsg['day26']?'active_warnning':''">
                        <li class="inner_table_cell ">
                            扣款
                        </li>
                        <li class="inner_table_cell">
                            <input type="tel" name="" id="twentysixth" class="inner_input" 
                            [(ngModel)]="tmpGoldtermsInfo.fixAmount26" 
                            (click)="msgClear('day26')" 
                            (blur)="amtClick('day26',tmpGoldtermsInfo.fixAmount26)"
                            (keyup)="amtClick('day26',tmpGoldtermsInfo.fixAmount26,'noShow')" placeholder="請輸入整數">
                        </li>
                        <li class="inner_table_cell third_td">元</li>
                    </ul>
                    <i class="input_info_warnning" *ngIf="errorMsg['day26']!==''">{{ errorMsg['day26'] | translate}}</i>
                </li>
            </ul>
        </div>
    </div>
    <!-- 首次購買 -->
    <!-- 非首次購買 -->
    <div *ngIf="tmpGoldtermsInfo.firstGoldBuyFlag==='N'">
        <ul class="table_info">
            <li class="table_row">
                <span>黃金存摺帳號</span>
                <i>{{ goldtermsInfo.goldAccount | accountFormate }}</i>
            </li>
            <li class="table_row">
                <span>新台幣約定扣款帳號</span>
                <i>{{ goldtermsInfo.trnsfrOutAccount | accountFormate }}</i>
            </li>

            <li class="table_row">
                <span>扣款狀態</span>
                <i>{{ goldTermStatus }}</i>
            </li>
        </ul>

        <ul class="table_info table_th_style">
            <li class="table_row">
                <span>約定扣款日期</span>
                <i>金額</i>
            </li>
            <li class="table_row">
                <span>6日</span>
                <i>{{ (goldtermsInfo.fixAmount6>0)?(goldtermsInfo.fixAmount6 | currencyMoney:'TWD'):'TWD 0'}}</i>
            </li>
            <li class="table_row">
                <span>16日</span>
                <i>{{ (goldtermsInfo.fixAmount16>0)?(goldtermsInfo.fixAmount16 | currencyMoney:'TWD'):'TWD 0'}}</i>
            </li>

            <li class="table_row">
                <span>26日</span>
                <i>{{ (goldtermsInfo.fixAmount26>0)?(goldtermsInfo.fixAmount26 | currencyMoney:'TWD'):'TWD 0'}}</i>
            </li>
        </ul>
        <div class="row_single">
            <h4 class="simple_title">變更設定</h4>
        </div>
        <div class="row_single">
            <!--變更新台幣約定扣款帳號-->
            <div class="inner_radio">
                <input type="radio" id="inner_radio01" name="inner_radioM" value="1" [(ngModel)]="tmpGoldtermsInfo.selectChange" (change)="radioChg(tmpGoldtermsInfo.selectChange)" checked>
                <label for="inner_radio01">
                    <span><i></i></span>
                    <b>變更新台幣約定扣款帳號</b>
                </label>
            </div>

            <!--變更約定扣款日期及金額-->
            <div class="inner_radio">
                <input type="radio" id="inner_radio02" name="inner_radioM" value="2" [(ngModel)]="tmpGoldtermsInfo.selectChange" (change)="radioChg(tmpGoldtermsInfo.selectChange)">
                <label for="inner_radio02">
                    <span><i></i></span>
                    <b>變更約定扣款日期及金額</b>
                </label>
            </div>

            <!--變更扣款狀態-->
            <div class="inner_radio">
                <input type="radio" id="inner_radio03" name="inner_radioM" value="3" [(ngModel)]="tmpGoldtermsInfo.selectChange" (change)="radioChg(tmpGoldtermsInfo.selectChange)">
                <label for="inner_radio03">
                    <span><i></i></span>
                    <b>變更扣款狀態</b>
                </label>
            </div>
        </div>
        <!--變更新台幣約定扣款帳號-->
        <div id="change1" *ngIf="tmpGoldtermsInfo.selectChange==='1'">
            <div class="row_single">
                <ul class="inner_table_frame">
                    <li class="inner_table_cell">
                        新台幣約定扣款帳號
                    </li>
                    <li class="inner_table_cell">
                        <select class="inner_select" (change)="onChangeTwAcct(tmpGoldtermsInfo.trnsfrOutAccount)"
                          [(ngModel)]="tmpGoldtermsInfo.trnsfrOutAccount">
                            <option *ngFor="let twMenu of trnsfrAcctsList" value="{{twMenu.acctNo}}">{{ twMenu.acctNo | accountFormate }}</option>
                        </select>
                    </li>
                </ul>
                <i class="select_info">(可用餘額 {{balance | currencyMoney:'TWD'}} )</i>
            </div>
        </div>
        <!--變更新台幣約定扣款帳號s-->
        <!--變更約定扣款日期及金額-->
        <div class="row_single" id="change2" *ngIf="tmpGoldtermsInfo.selectChange==='2'">
            <ul class="normal_table">
                <li class="normal_td w80">
                    <div class="inner_checkbox checkbox_inline">
                        <input type="checkbox" id="inner_checkbox001" name="inner_checkbox" 
                            [checked]="tmpGoldtermsInfo.fixAmount6Checked" (click)="dateClick('day6')">
                        <label for="inner_checkbox001">
                            <span><i></i></span>
                            <b>6日</b>
                        </label>
                    </div>
                </li>
                <li class="normal_td">
                    <ul class="inner_table_frame" [ngClass]="errorMsg['day6']?'active_warnning':''">
                        <li class="inner_table_cell">
                            扣款
                        </li>
                        <li class="inner_table_cell">
                            <input type="tel" name="" id="sixth" class="inner_input" [(ngModel)]="tmpGoldtermsInfo.fixAmount6" placeholder="請輸入整數"
                            (keyup)="amtClick('day6',tmpGoldtermsInfo.fixAmount6,'noShow')"
                            (click)="msgClear('day6')" (blur)="amtClick('day6',tmpGoldtermsInfo.fixAmount6)">
                        </li>
                        <li class="inner_table_cell third_td">元</li>
                    </ul>
                    <i class="input_info_warnning" *ngIf="errorMsg['day6']!==''">{{ errorMsg['day6'] | translate}}</i>
                </li>
            </ul>
            <ul class="normal_table">
                <li class="normal_td w80">
                    <div class="inner_checkbox checkbox_inline">
                        <input type="checkbox" id="inner_checkbox002" name="inner_checkbox" 
                            [checked]="tmpGoldtermsInfo.fixAmount16Checked" (click)="dateClick('day16')">
                        <label for="inner_checkbox002">
                            <span><i></i></span>
                            <b>16日</b>
                        </label>
                    </div>
                </li>
                <li class="normal_td">
                    <ul class="inner_table_frame" [ngClass]="errorMsg['day16']?'active_warnning':''">
                        <li class="inner_table_cell ">
                            扣款
                        </li>
                        <li class="inner_table_cell">
                            <input type="tel" name="" id="sixteenth" class="inner_input" [(ngModel)]="tmpGoldtermsInfo.fixAmount16" placeholder="請輸入整數"
                            (keyup)="amtClick('day16',tmpGoldtermsInfo.fixAmount16,'noShow')"
                            (click)="msgClear('day16')" (blur)="amtClick('day16',tmpGoldtermsInfo.fixAmount16)">
                        </li>
                        <li class="inner_table_cell third_td">元</li>
                    </ul>
                    <i class="input_info_warnning" *ngIf="errorMsg['day16']!==''">{{ errorMsg['day16'] | translate}}</i>
                </li>
            </ul>
            <ul class="normal_table">
                <li class="normal_td w80">
                    <div class="inner_checkbox checkbox_inline">
                        <input type="checkbox" id="inner_checkbox003" name="inner_checkbox" 
                            [checked]="tmpGoldtermsInfo.fixAmount26Checked" (click)="dateClick('day26')">
                        <label for="inner_checkbox003">
                            <span><i></i></span>
                            <b>26日</b>
                        </label>
                    </div>
                </li>
                <li class="normal_td">
                    <ul class="inner_table_frame" [ngClass]="errorMsg['day26']?'active_warnning':''">
                        <li class="inner_table_cell ">
                            扣款
                        </li>
                        <li class="inner_table_cell">
                            <input type="tel" name="" id="twentysixth" class="inner_input" [(ngModel)]="tmpGoldtermsInfo.fixAmount26" placeholder="請輸入整數"
                            (keyup)="amtClick('day26',tmpGoldtermsInfo.fixAmount26,'noShow')"
                            (click)="msgClear('day26')" (blur)="amtClick('day26',tmpGoldtermsInfo.fixAmount26)">
                        </li>
                        <li class="inner_table_cell third_td">元</li>
                    </ul>
                    <i class="input_info_warnning" *ngIf="errorMsg['day26']!==''">{{ errorMsg['day26'] | translate}}</i>
                </li>
            </ul>
        </div>
        <!--變更約定扣款日期及金額-->
        <!--變更扣款狀態-->
        <div id="change3" *ngIf="tmpGoldtermsInfo.selectChange==='3'">
            <div class="row_single">
                <dl class="inner_table_three">
                    <dt class="inner_cell_three">
                        <div class="radio_button">
                            <input type="radio" id="payMethod1" name="payMethod" value="3" 
                                [(ngModel)]="tmpGoldtermsInfo.payMethod" [disabled]="goldtermsInfo.pauseCode==='1'">
                            <label for="payMethod1">
                                <b>終止扣款</b>
                            </label>
                        </div>
                    </dt>
                    <dt class="inner_cell_three">
                        <div class="radio_button">
                            <input type="radio" id="payMethod2" name="payMethod" value="2" 
                                [(ngModel)]="tmpGoldtermsInfo.payMethod" >
                            <label for="payMethod2">
                                <b>暫停扣款</b>
                            </label>
                        </div>
                    </dt>
                    <dt class="inner_cell_three">
                        <div class="radio_button">
                            <input type="radio" id="payMethod3" name="payMethod" value="1" 
                                [(ngModel)]="tmpGoldtermsInfo.payMethod" [disabled]="goldtermsInfo.pauseCode===''">
                            <label for="payMethod3">
                                <b>恢復扣款</b>
                            </label>
                        </div>
                    </dt>
                </dl>
            </div>
        </div>
        <!--變更扣款狀態-->
        <div id="payTime" *ngIf="tmpGoldtermsInfo.payMethod==='2'">
            <div class="row_single">
                <ul class="inner_table_frame">
                    <li class="inner_table_cell">
                        起日
                    </li>
                    <li class="inner_table_cell">
                        <!-- <input type="date" name="dateWithMinMax" min="2019-01-17" max="2021-03-31" class="inner_input_data" id="currentTime3"> -->
                        <input type="date" name="dateWithMinMax" class="inner_input_data" id="currentTime3" 
                            min="tmpDate.beg.min" max="tmpDate.beg.max"
                            [(ngModel)]="tmpDate.beg.selected" (change)="checkPauseDate('beg')">
                    </li>
                </ul>
            </div>
            <div class="row_single">
                <ul class="inner_table_frame">
                    <li class="inner_table_cell">
                        迄日
                    </li>
                    <li class="inner_table_cell">
                        <!-- <input type="date" name="dateWithMinMax" min="2019-01-17" max="2021-03-31" class="inner_input_data" id="currentTime4"> -->
                        <input type="date" name="dateWithMinMax" class="inner_input_data" id="currentTime4"
                            min="tmpDate.end.min" max="tmpDate.end.max"
                            [(ngModel)]="tmpDate.end.selected" (change)="checkPauseDate('end')">
                    </li>
                </ul>
            </div>
        </div>
        <hr class="divider" id="hr">
    </div>
    <!-- 非首次購買 -->
    <app-select-security (securityObj)="securityOptionBak($event)" [transactionObj]="transactionObj">
    </app-select-security> 
    <div class="row_single">
        <div class="double_button">
            <a href="javascript:void('0')"(click)='doCancel()'>{{'BTN.PREVIOUS' | translate }}</a>
            <a href="javascript:void('0')" (click)="checkEvent();">{{'BTN.NEXT' | translate }}</a>
        </div>
    </div>
  </section>
</ng-container>
